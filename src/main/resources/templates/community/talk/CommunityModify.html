<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글수정</title>
    <link rel="sssashortcut icon" href="/images/fav.ico" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/community.css}">
    <!-- 화면당 적용할 CSS만 추가하면됨 -->
    <script>
        window.onload = function() {
            // name 속성으로 hidden input에서 artCate 값 가져오기
            const artCate = document.querySelector('input[name="artCate"]').value;

            // 카테고리 기반으로 특정 요소 선택
            let now;
            if (artCate === 'CommunityNotice') {
                now = document.querySelector('.cate_lnb li:nth-child(1) a');
            } else if (artCate === 'CommunityDiet') {
                now = document.querySelector('.cate_lnb li:nth-child(2) a');
            } else if (artCate === 'CommunityChef') {
                now = document.querySelector('.cate_lnb li:nth-child(3) a');
            } else if (artCate === 'CommunityCs') {
                now = document.querySelector('.cate_lnb li:nth-child(4) a');
            } else if (artCate === 'CommunityFaq') {
                now = document.querySelector('.cate_lnb li:nth-child(5) a');
            }

            // 해당 요소에 "now" 클래스 추가
            if (now) {
                now.classList.add("now");
            }
        };
    </script>
</head>
<body>
<div id="container">
    <th:block th:include="/grid/_header.html"/>
    <th:block th:include="/grid/_aside_cm.html"/>

    <section class="modify">
        <h3>글수정</h3>
        <article>
            <form th:action="@{|/community/${cate}/CommunityModify/${artNo}|}" method="post"
                  enctype="multipart/form-data">
                <!-- db 카테고리 저장 -->
                <input type="hidden" name="artCate" th:value="${articleDTO.artCate}">

                <input type="hidden" name="artWriter" value="${sessUser.uid}">
                <table>
                    <tr>
                        <td>제목</td>
                        <td><input type="text" name="artTitle" th:value="${articleDTO.artTitle}"/></td>
                    </tr>
                    <tr>
                        <td>내용</td>
                        <td>
                            <textarea name="artContent">[[${articleDTO.artContent}]]</textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>첨부</td>
                        <td style="text-align: left;">
                            <p style="margin-bottom: 6px; ">
                                최대 2개 파일 첨부 가능, 각 파일당 최대 10MB 까지 업로드
                            </p>
                            <!-- 첨부파일이 있으면 나타나게끔  -->
                            <div th:if="${articleDTO.artFile > 0}">
                                <div th:each="file : ${articleDTO.fileList}">
                                    <p style="margin: 4px 0">
                                        <span th:text="${file.fileoName}">File Name</span>
                                        <a th:href="@{#}" style="color:red;">X</a>
                                    </p>
                                </div>
                            </div>
                            <input type="file" name="file1"/>
                            <input type="file" name="file2"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <!-- db 날짜 저장 -->
                            <input type="hidden" name="artRdate" th:value="${articleDTO.artRdate}">
                        </td>
                    </tr>
                </table>
                <div>
                    <a th:href="|/community/${cate}|" class="btnCancel">취소</a>
                    <input type="submit" class="btnWrite" value="수정완료">
                </div>
            </form>
        </article>
    </section>
</div>
<th:block th:include="/grid/_footer.html"/>
